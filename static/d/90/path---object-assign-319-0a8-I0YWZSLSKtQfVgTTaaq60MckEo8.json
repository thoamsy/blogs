{"data":{"site":{"siteMetadata":{"title":"ğŸ˜","author":"Yang Kui"}},"markdownRemark":{"id":"f5027071-0db7-51be-bf7c-8a3e80be29dd","html":"<p>åœ¨ <em>immutable struct</em> æˆ–è€…è¯´ <em>functional programming</em> çš„å½±å“ä¸‹, <code class=\"language-text\">Object.assign</code> å’Œ <a href=\"https://github.com/tc39/proposal-object-rest-spread\">Object Spread</a> æ˜¯æˆ‘ä»¬ç¦»ä¸å¼€çš„æ“ä½œ. ä¸è¿‡å®ƒçš„åŠŸèƒ½çœŸçš„æ˜¯ <em>shadow copy</em> å—? è¿™é‡Œæˆ‘åˆ—å‡ºä¸€ä¸ªä¾‹å­æ¥è®°å½•è¿™ä¸ªé—®é¢˜, ä»¥é˜²ä»¥åç¢°åˆ°å‘.</p>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹è±¡, åŒ…æ‹¬äº†å‡ ç§å…¸å‹çš„å±æ€§:</p>\n<ol>\n<li>æ™®é€šå±æ€§</li>\n<li>get å±æ€§</li>\n<li>set å±æ€§</li>\n<li>Symbol</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">hh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'__GETTER__'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">hh</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'__SETTER__'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">+=</span> val <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cool'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'good'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å…ˆæå‡ºé—®é¢˜, å“ªç§ç±»å‹çš„å±æ€§ä¼šè¢«æˆåŠŸ copy? <code class=\"language-text\">get å’Œ set</code> æ—¶å€™ä¼šè¢«è¿è¡Œå‘¢?</p>\n<p>é¦–å…ˆå¯ä»¥ç¡®å®šçš„æ˜¯, è¿ç»­ä¸¤æ¬¡æ‰“å° <code class=\"language-text\">obj.hh</code> çš„è¯, ä¸€å®šä¼šå¾—åˆ° <code class=\"language-text\">2, 3</code>. å› ä¸ºæ¯æ¬¡ <code class=\"language-text\">hh</code> éƒ½ä¼šè¢«è¿è¡Œå¯¹å§.</p>\n<p>OK, ç°åœ¨å¼€å§‹å¯¹å®ƒ <code class=\"language-text\">assign</code>, æœ‰ä¸‹é¢ä»£ç </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> shadow <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>shadow<span class=\"token punctuation\">.</span>hh<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>shadow<span class=\"token punctuation\">.</span>hh<span class=\"token punctuation\">)</span></code></pre></div>\n<p>è¿™ä¸ªæ—¶å€™å¾—åˆ°çš„å€¼æ˜¯å¤šå°‘å‘¢(å‡è®¾è¿™ä¸²ä»£ç ç´§æ¥ä¸Šé¢çš„ä»£ç )\næœ€åçš„ç»“æœæ˜¯ <code class=\"language-text\">4, 4</code>\nè¿™è¯´æ˜ GET åªè¢«è¿è¡Œäº†ä¸€æ¬¡å, å°±å†ä¹Ÿæ²¡æœ‰è¿è¡Œäº†.\né‚£æˆ‘ä»¬æ‰“å°ä¸€ä¸‹ shadow çš„å†…éƒ¨çœ‹çœ‹,</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Object<span class=\"token punctuation\">.</span><span class=\"token function\">getOwnPropertyDescriptors</span><span class=\"token punctuation\">(</span>shadow<span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/27b78/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.54491017964072%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'110\\'%3e%3cpath d=\\'M0 5v5h5l5 1-5 1c-4 0-5 0-5 2s0 2 1 1c2-1 3 4 2 5H2l-1-1-1 4c0 3 0 4 1 3 1-2 2-1 2 2l-1 2c-2 0-2 1-2 4s0 4 1 3c1-3 1-2 2 2 0 4 0 4-2 3-1-2-1 2-1 33v35h401V0H0v5\\' fill=\\'%23d3d3d3\\' fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n    ></span>\n    <picture>\n        <source\n          data-srcset=\"/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/f2fbe/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.webp 200w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/e227a/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.webp 400w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/0cbce/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.webp 800w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/6bc95/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.webp 1200w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/52e4b/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.webp 1336w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/9ec3c/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.png 200w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/c7805/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.png 400w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/8ff1e/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.png 800w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/6ff5e/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.png 1200w,\n/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/27b78/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.png 1336w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image lazyload\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n          data-src=\"/blogs/static/b0dd709a206bcde06de0b0ffc0157ef2/8ff1e/06FE5C2C-8A1B-45EE-B45D-D3DB0774F9FA.png\"\n          alt=\"06FE5C2C 8A1B 45EE B45D D3DB0774F9FA\"\n          title=\"\"\n        />\n      </picture>\n  </span>\n  </a></p>\n<p>æ³¨æ„åˆ°, è¿™ä¸ªæ—¶å€™ hh åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å±æ€§, è€Œä¸å†å±äº get set. ä½œä¸ºå¯¹æ¯”, æˆ‘ä»¬çœ‹ä¸‹ obj ä¼šè¾“å‡ºä»€ä¹ˆ.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blogs/static/73ccd330d70754382a3ed1d85ee766e1/884f2/336C40D7-A962-48C0-B485-B81EDD28B4EA.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 26.794871794871796%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'107\\'%3e%3cpath d=\\'M0 53v54h401V0H0v53m0 1v54l1-50A570 570 0 0 1 2 1H0v53\\' fill=\\'%23d3d3d3\\' fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n    ></span>\n    <picture>\n        <source\n          data-srcset=\"/blogs/static/73ccd330d70754382a3ed1d85ee766e1/f2fbe/336C40D7-A962-48C0-B485-B81EDD28B4EA.webp 200w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/e227a/336C40D7-A962-48C0-B485-B81EDD28B4EA.webp 400w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/0cbce/336C40D7-A962-48C0-B485-B81EDD28B4EA.webp 800w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/6bc95/336C40D7-A962-48C0-B485-B81EDD28B4EA.webp 1200w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/063e3/336C40D7-A962-48C0-B485-B81EDD28B4EA.webp 1560w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/blogs/static/73ccd330d70754382a3ed1d85ee766e1/9ec3c/336C40D7-A962-48C0-B485-B81EDD28B4EA.png 200w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/c7805/336C40D7-A962-48C0-B485-B81EDD28B4EA.png 400w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/8ff1e/336C40D7-A962-48C0-B485-B81EDD28B4EA.png 800w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/6ff5e/336C40D7-A962-48C0-B485-B81EDD28B4EA.png 1200w,\n/blogs/static/73ccd330d70754382a3ed1d85ee766e1/884f2/336C40D7-A962-48C0-B485-B81EDD28B4EA.png 1560w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image lazyload\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n          data-src=\"/blogs/static/73ccd330d70754382a3ed1d85ee766e1/8ff1e/336C40D7-A962-48C0-B485-B81EDD28B4EA.png\"\n          alt=\"336C40D7 A962 48C0 B485 B81EDD28B4EA\"\n          title=\"\"\n        />\n      </picture>\n  </span>\n  </a></p>\n<p>æ‰€ä»¥ç»“è®ºå°±æ˜¯, æ™®é€šå±æ€§å’Œ Symbol ä¼šè¢« Copy. è‡³äº Symbol æ—¶å€™è¿˜æ˜¯åŸæ¥é‚£ä¸ª, è‡ªå·±æµ‹è¯•ä¸€ä¸‹å¯ä»¥å‘ç°è‚¯å®šæ˜¯çš„.</p>\n<p>é‚£ä¹ˆ, å¦å¤–ä¸€ä¸ªé—®é¢˜. è¿™äº› GET å’Œ SET æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¢«æ‰§è¡Œçš„å‘¢? æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, ä¸Šé¢åªæ‰“å°å‡ºäº† <strong><em>GETTER</em></strong> è€Œæ²¡æœ‰ <strong><em>SETTER</em></strong>, å…ˆå¼•ç”¨ MDN çš„æ–‡æ¡£</p>\n<blockquote>\n<p>The Object.assign() method only copies enumerable and own properties from a source object to a target object. It uses [[Get]] on the source and [[Set]] on the target, so it will invoke getters and setters.</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯è¯´, ç¬¬äºŒä¸ªå‚æ•°çš„ GET ä¼šè¢«è°ƒç”¨, ç¬¬ä¸€ä¸ªå‚æ•°çš„ SET ä¼šè¢«è°ƒç”¨. è€Œå› ä¸º <code class=\"language-text\">{ â€¦obj }</code> å°±ç›¸å½“äº <code class=\"language-text\">Object.assign({}, obj)</code>, æ‰€ä»¥åªæœ‰ GET ä¼šè¢«è°ƒç”¨ã€‚</p>\n<p>å¦‚ä½•è¯æ˜ SET ä¼šè¢«è°ƒç”¨å‘¢? è¿™ä¸ªç®€å•, ä½¿ç”¨ <code class=\"language-text\">Object.assign(obj, obj)</code> å°±è¡Œ.\nå¦‚æœç°åœ¨çš„ä»£ç æ˜¯è¿™æ ·çš„</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> symbol <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cool'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">hh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'__GETTER__'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">hh</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'__SETTER__'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">+=</span> val <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>symbol<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'good'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>hh<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>hh<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> aha <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getOwnPropertyDescriptors</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">ownKeys</span><span class=\"token punctuation\">(</span>aha<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ä¼šå‡ºç°ä¸‹é¢çš„ç»“æœ.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blogs/static/306e2f20608f2abb12380067efc28b5f/26dcc/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 538px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 115.98513011152416%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'464\\'%3e%3cpath d=\\'M0 15v15h13l13 1-13 1H0v25h14l13 1-14 1H0v405h401V0H206A8900 8900 0 0 0 3 1L0 0v15m95 5l1 8 1-3c0-6 5-5 7 1l2 2c1 0 1-1-1-4l-1-4c3-4 0-8-5-8h-4v8m0 27l1 8 1-3c0-3 0-4 2-4 1 0 3 1 4 4l3 3c1 0 1-1-1-4s-2-4-1-6c2-3-1-7-7-7-2 0-2 1-2 9m41 79v9h4c4 0 5-1 5-3 2-5 0-9-4-9-3 0-3 0-3-2l-1-3-1 8m26 27v9h4c5 0 6-1 6-6s-2-7-5-6c-2 0-3 0-2-2l-1-3c-2 0-2 1-2 8m27 27v9h4c5-1 6-2 6-7 0-4-2-6-6-6-2 1-2 1-2-1l-1-3-1 8m-105-3c-2 1-3 9-1 11 3 3 9 0 9-6 0-5-4-7-8-5m53 1c-4 4-1 12 4 11h2c0 2-3 3-5 3h-2 8l1-9v-7h-3c-3 0-4 1-5 2m-68 54c-3 5 0 11 4 10 3-1 3 0 3 1l-4 2c-3 0-3 2 0 2 5 0 6-2 6-10v-7h-4c-3 0-4 0-5 2m161-1l-1 5c0 4 1 6 5 6s5-2 5-6-1-6-5-6l-4 1m53 1c-3 5 0 11 4 10 3-1 3 0 3 1l-4 2c-3 0-3 2 0 2 5 0 6-2 6-10v-7h-4c-3 0-4 0-5 2m-52 26c-2 1-3 8-1 10s7 1 8-1c2-4 0-11-4-11l-3 2m-69 29l1 8 3 1c4 0 6-1 6-7 0-4-2-7-6-6-1 1-2 1-1-1l-1-3c-2 0-2 1-2 8m28 19l-1 9c0 7 1 7 3 8 4 0 7-2 7-6 0-5-2-7-5-7-3 1-3 1-3-2s-1-3-1-2m-107 5c-2 3-1 10 1 11 6 3 11-6 6-10-1-2-5-2-7-1m54 1c-4 3 0 12 4 10 2-1 2-1 2 1l-4 2c-4 0-4 2 0 2 5 0 6-2 6-10v-7h-3l-5 2m-55 28v9h4c4 0 6-1 6-5 0-5-2-7-5-7-3 1-3 0-3-2l-1-3-1 8m14-1c-3 6 3 14 8 9v-10c-2-2-7-1-8 1m54 0c-2 2-2 7 1 9 4 4 10-2 7-8-1-3-6-4-8-1m13 0c-3 5-1 10 4 10 4 0 5-2 5-6l-1-5c-2-2-7-1-8 1m60 23c0 2 0 2-2 2-4-2-8 7-4 10l5 2h3v-9l-1-8-1 3m-46 3c-4 4-1 12 4 11 2-1 2 0 2 1l-4 2c-3 0-3 1 0 2 4 0 6-2 6-10l-1-7h-3c-1-1-3 0-4 1m14 0c-1 1-2 2-2 5 0 4 1 6 5 6 5 0 7-7 3-11-2-2-3-2-6 0m13 0c-4 4-2 11 3 11 4 0 5-2 5-6 0-6-4-9-8-5m-68 29v9h3c4 0 7-3 7-7 0-3-4-6-6-5-2 0-2 0-2-2l-1-3-1 8m26 19v9c0 7 1 7 3 8 5 0 7-1 7-6s-2-8-5-7c-2 1-3 1-2-1 0-3-2-5-3-3m27 34v9h3c4 1 7-1 7-6 0-4-2-6-5-6-3 1-3 0-3-2l-1-3-1 8m-106-2c-2 2-1 9 1 10 5 4 9-2 7-8-1-3-6-4-8-2m53 1c-3 5 0 11 4 10 3-1 3 0 3 1l-4 2c-3 0-3 2 0 2 5 0 6-2 6-10v-7h-4c-3 0-4 0-5 2\\' fill=\\'%23d3d3d3\\' fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n    ></span>\n    <picture>\n        <source\n          data-srcset=\"/blogs/static/306e2f20608f2abb12380067efc28b5f/f2fbe/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.webp 200w,\n/blogs/static/306e2f20608f2abb12380067efc28b5f/e227a/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.webp 400w,\n/blogs/static/306e2f20608f2abb12380067efc28b5f/95923/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.webp 538w\"\n          sizes=\"(max-width: 538px) 100vw, 538px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/blogs/static/306e2f20608f2abb12380067efc28b5f/9ec3c/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.png 200w,\n/blogs/static/306e2f20608f2abb12380067efc28b5f/c7805/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.png 400w,\n/blogs/static/306e2f20608f2abb12380067efc28b5f/26dcc/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.png 538w\"\n          sizes=\"(max-width: 538px) 100vw, 538px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image lazyload\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n          data-src=\"/blogs/static/306e2f20608f2abb12380067efc28b5f/26dcc/7F67AD27-E0D9-42B7-AB4C-D67D9A4C7241.png\"\n          alt=\"7F67AD27 E0D9 42B7 AB4C D67D9A4C7241\"\n          title=\"\"\n        />\n      </picture>\n  </span>\n  </a></p>\n<p>åœ¨è¿™é‡Œ, GET å’Œ SET éƒ½è¢«è°ƒç”¨äº†ä¸€æ¬¡, åˆ†åˆ«æ˜¯ source å’Œ target è°ƒç”¨çš„. è€Œè¿™ä¸ªæ—¶å€™ a å˜æˆ 12 ä¹Ÿä¸éš¾è§£é‡Š.\nå› ä¸º <code class=\"language-text\">obj.a</code> åŸæ¥æ˜¯ 3. å½“ assign è¢«è°ƒç”¨çš„æ—¶å€™, å†…éƒ¨ä¼šæœ‰ä¸€ä¸ª <code class=\"language-text\">obj.a = obj.a</code> çš„è¿‡ç¨‹. å…ˆ GET, å°±è®© <code class=\"language-text\">obj.a</code> å˜æˆäº† 4, ç„¶åæ˜¯ SET, ä¹Ÿå°±æ˜¯ <code class=\"language-text\">obj.a += obj.a * 4</code> å°±æˆäº† 12.</p>\n<p>ä¸è¿‡, å€¼å¾—æ³¨æ„çš„æ˜¯, è¿™é‡Œ hh è¿˜æ˜¯ GET å’Œ SET, å¹¶æ²¡æœ‰åƒä¸Šé¢çš„ assign æ‰€åšçš„ä¸€æ ·ï¼Œè¢«æ›¿æ¢æˆæ™®é€šçš„å±æ€§.\nä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯æœ‰æ„ä¸ºä¹‹.</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•å¤åˆ¶å«æœ‰ get å’Œ set çš„å¯¹è±¡å‘¢? å¦‚æœç”¨åˆ° ES8 çš„ç‰¹æ€§çš„è¯, ä¼šå¾ˆç®€å•</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> realShadow <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">getOwnPropertyDescriptors</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blogs/static/af279db6c89a2d5d7aa85a971678507a/6087b/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 26.848249027237355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'400\\' height=\\'107\\'%3e%3cpath d=\\'M0 54v53h401V0H0v54m0 0v54l1-50a583 583 0 0 1-1-4\\' fill=\\'%23d3d3d3\\' fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n    ></span>\n    <picture>\n        <source\n          data-srcset=\"/blogs/static/af279db6c89a2d5d7aa85a971678507a/f2fbe/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.webp 200w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/e227a/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.webp 400w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/0cbce/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.webp 800w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/6bc95/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.webp 1200w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/ab58e/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.webp 1542w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/blogs/static/af279db6c89a2d5d7aa85a971678507a/9ec3c/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.png 200w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/c7805/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.png 400w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/8ff1e/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.png 800w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/6ff5e/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.png 1200w,\n/blogs/static/af279db6c89a2d5d7aa85a971678507a/6087b/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.png 1542w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image lazyload\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n          data-src=\"/blogs/static/af279db6c89a2d5d7aa85a971678507a/8ff1e/1A25BA7A-053A-42D7-91AB-2184F28CFAA5.png\"\n          alt=\"1A25BA7A 053A 42D7 91AB 2184F28CFAA5\"\n          title=\"\"\n        />\n      </picture>\n  </span>\n  </a></p>\n<p>è¿™é‡Œ a çš„å€¼è¿˜æ˜¯ 3, è¯´æ˜è¿™ä¸ª get æ ¹æœ¬æ²¡æœ‰è¢«æ‰§è¡Œ, å®Œæˆæ²¡æœ‰å‰¯ä½œç”¨. è¿™æ‰æ˜¯çœŸæ­£çš„æµ…æ‹·è´å˜›!</p>\n<p>OK, é‚£ä¹ˆè¿™é‡Œå¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®º: å¯¹äºæ™®é€šçš„çº¯å¯¹è±¡, æ¯”å¦‚ redux é‡Œä¿å­˜çš„é‚£äº›, ä½¿ç”¨ <code class=\"language-text\">assign</code> æ²¡æœ‰ä»»ä½•é—®é¢˜. ä½†å¦‚æœæ˜¯è‡ªå·±å®šä¹‰çš„å¤æ‚å¯¹è±¡, å¸¦äº†å¾ˆå¤š get çš„è¯, æœ€å¥½çš„æ–¹å¼è¿˜æ˜¯é‡‡ç”¨ä¸‹é¢è¿™ç§æœ€å®‰å…¨çš„æ–¹å¼å§.</p>\n<p>å€¼å¾—ä¸€æçš„æ˜¯, è¿™ä¹Ÿæ˜¯ MDN æ¨èçš„æ–¹å¼:</p>\n<blockquote>\n<p>Whereas the Object.assign() method will only copy enumerable and own properties from a source object to a target object, you are able to use this method and Object.create() for a shallow copy between two unknown objects</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">getPrototypeOf</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">getOwnPropertyDescriptors</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"Object.assign çš„ä¸€äº›é—®é¢˜","spoiler":null,"date":"2018/01/31"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/object-assign/","previous":{"fields":{"slug":"/deep-learning/"},"frontmatter":{"title":"Deep Learning Quick Guideï¼ˆç¿»è¯‘ï¼‰","spoiler":null}},"next":{"fields":{"slug":"/lodash-fp/"},"frontmatter":{"title":"ä½¿ç”¨ lodash/fp","spoiler":"æ„Ÿå— fp çš„å¼ºå¤§"}}}}