<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blogs/styles.0c6f546e4cf72f2003b6.css">.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .3s ease;display:-webkit-flex;display:flex}.react-toggle-track-check{-webkit-flex:1 1;flex:1 1;opacity:0;transition:opacity .25s ease;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{-webkit-flex:1 1;flex:1 1;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms}.react-toggle--checked .react-toggle-thumb{left:27px;border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}body{--blue:#007acc;--pink:#ffa7c4;--bg:#fff;--header:var(--blue);--textNormal:#222;--textTitle:#222;--textLink:var(--blue);--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a;background-color:var(--bg)}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:var(--pink);--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:#373c49;--inlineCode-text:#e6e6e6}em,h1,h2,h3,h4,h5,h6,li,p,small,strong{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}blockquote{margin:20px -30px 30px;padding:20px 45px 20px 26px}body:not(.dark) blockquote{background-color:rgba(255,229,100,.3);border-left:9px solid #ffe564}blockquote p:first-of-type:not(:last-child){font-weight:700;color:initial;margin-top:0}blockquote p:nth-of-type(2){margin-top:0;font-size:17px}code[class*=language-],pre[class*=language-]{color:#fff;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace}:not(pre)>code[class*=language-],pre[class*=language-]{background:#011627}pre[class*=language-]{border-radius:10px}pre[class*=language-]::selection{background:#27292a}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,93%,.15)}:not(pre)>code[class=language-text]{border-radius:.3em;background-color:var(--inlineCode-bg)!important;color:var(--inlineCode-text);white-space:normal;padding:0 3px;word-break:break-word;font-family:Menlo,Consolas,Courier New,monospace;text-shadow:none}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #ffa7c4}.gatsby-highlight{overflow:auto}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#637777}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.1.20"/><link rel="manifest" href="/blogs/manifest.webmanifest"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/blogs/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/blogs/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/blogs/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/blogs/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/blogs/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/blogs/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/blogs/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/blogs/icons/icon-512x512.png"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="/blogs/rss.xml"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><link as="script" rel="preload" href="/blogs/1-f619b1481c3ae3512ee3.js"/><link as="script" rel="preload" href="/blogs/component---src-templates-blog-post-js-c59f786a55abdade9d2f.js"/><link as="script" rel="preload" href="/blogs/app-011caea2a0bcf15f44d6.js"/><link as="script" rel="preload" href="/blogs/styles-018f1ae99b2bdaf5498d.js"/><link as="script" rel="preload" href="/blogs/webpack-runtime-82b54b860617f80c57ed.js"/><link as="fetch" rel="preload" href="/blogs/static/d/805/path---lodash-fp-567-3a4-IyuT0UdetxqAJGiqsYCo9b7yNE.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><main class="sc-bdVaJa jqFihH"><article style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header class="sc-htpNat efVuag"><h3 style="font-family:sans-serif;margin-top:0;margin-bottom:-1.75rem"><a class="sc-bwzfXH ktXRaB" href="/blogs/">ğŸ˜</a></h3><div class="react-toggle"><div class="react-toggle-track"><div class="react-toggle-track-check"><span>ğŸŒš</span></div><div class="react-toggle-track-x"><span>ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between Dark and Light mode"/></div></header><header><h1 style="color:var(--textTitle);transition:color 0.3s ease-out, background 0.3s ease-out">ä½¿ç”¨ lodash/fp</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">2018/04/02</p></header><div><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä»‹ç» lodash çš„ <a href="https://github.com/lodash/lodash/wiki/FP-Guide">fp</a> æ¨¡å—, é€šè¿‡å®ƒçš„ç‰¹ç‚¹æ¥è®© React çš„ <code class="language-text">setState</code> å°‘å†™å¾ˆå¤šä»£ç . åŒæ ·çš„åŸç†ä¹Ÿèƒ½æ”¾åœ¨ redux çš„ <code class="language-text">reducer</code> ä¸Š, ä½†æ˜¯å› ä¸º lodash/fp çš„ç¼ºé™·, è¿™ç¯‡æ–‡ç« ä¸ä¼šæ·±å…¥.</p>
<h2 id="åˆ é™¤æ•°ç»„çš„æŸä¸ªå€¼"><a href="#%E5%88%A0%E9%99%A4%E6%95%B0%E7%BB%84%E7%9A%84%E6%9F%90%E4%B8%AA%E5%80%BC" aria-label="åˆ é™¤æ•°ç»„çš„æŸä¸ªå€¼ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>åˆ é™¤æ•°ç»„çš„æŸä¸ªå€¼</h2>
<p>å¼€é—¨å…ˆæ¥ä¸€ä¸ªä¾‹å­.
å‡è®¾æˆ‘ä»¬çš„ state çš„ç»“æ„æ˜¯è¿™æ ·</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">state <span class="token operator">=</span> <span class="token punctuation">{</span>
  posts<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'1234567'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'abc'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'4343434'</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'def'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>æˆ‘ä»¬æƒ³åˆ é™¤ç‰¹å®šçš„ id çš„ post è¯, æœ€åŸç”Ÿçš„å†™æ³•ä¼šæ˜¯</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> posts <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
	posts<span class="token punctuation">:</span> posts<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>post <span class="token operator">=></span> post<span class="token punctuation">.</span>id <span class="token operator">!==</span> postId<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ä½¿ç”¨æ™®é€šçš„ lodash ä¼šæ˜¯</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> posts <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  posts<span class="token punctuation">:</span> <span class="token function">reject</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> postId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>è¿™æ ·çœ‹èµ·æ¥, æ™®é€šçš„ lodash å¹¶æ²¡æœ‰åšå¤šå°‘äº‹æƒ…, åªä¸è¿‡åœ¨ <code class="language-text">filter</code> çš„æ—¶å€™, é€šè¿‡å†…ç½®çš„ <code class="language-text">reject</code> å°‘å†™äº†ä¸€äº›ä»£ç .
é‚£ä¹ˆ, æˆ‘ä»¬å†çœ‹ä¸‹ lodash/fp çš„å†™æ³•</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">,</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> postId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
<span class="token keyword">const</span> rejectWithPostId <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reject<span class="token punctuation">,</span> <span class="token function">propEq</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">rejectWithPostId</span><span class="token punctuation">(</span>postId<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>ä»è¡¨é¢ä¸Šçœ‹, æˆ‘ä»¬å·²ç»å°‘å†™äº†å¾ˆå¤šé‡å¤çš„ä»£ç . æ¯”å¦‚ä¹‹å‰ä¸¤ä¸ªä»£ç ä¸­éƒ½ä¼šå‡ºç°ä¸‰æ¬¡çš„ <code class="language-text">posts</code>, åœ¨è¿™é‡Œåªå‡ºç°äº†ä¸€æ¬¡, è€Œä¸”ä¹Ÿæ²¡æœ‰åµŒå¥—å’Œå¤§æ‹¬å·çš„å‡ºç°, è¿™æ˜æ˜¾èƒ½å¢åŠ ä»£ç çš„å¯è¯»æ€§.</p>
<p>è€Œä¸‹é¢é‚£ä¸ªä½¿ç”¨ compose çš„æ–¹å¼, è™½ç„¶çœ‹ä¸Šå»æ€»ä»£ç å¤šäº†, ä½†æ˜¯è¿›ä¸€æ­¥æé«˜äº†ä»£ç çš„å¤ç”¨æ€§.</p>
<h2 id="å…·ä½“çš„è§£é‡Šåœ¨ä¸‹æ–‡è¯´æ˜"><a href="#%E5%85%B7%E4%BD%93%E7%9A%84%E8%A7%A3%E9%87%8A%E5%9C%A8%E4%B8%8B%E6%96%87%E8%AF%B4%E6%98%8E" aria-label="å…·ä½“çš„è§£é‡Šåœ¨ä¸‹æ–‡è¯´æ˜ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å…·ä½“çš„è§£é‡Šåœ¨ä¸‹æ–‡è¯´æ˜</h2>
<h2 id="lodashfp-çš„å˜åŒ–"><a href="#lodashfp-%E7%9A%84%E5%8F%98%E5%8C%96" aria-label="lodashfp çš„å˜åŒ– permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>lodash/fp çš„å˜åŒ–</h2>
<p>é‚£ä¹ˆè¿™ä¸ªæ¨¡å—å’Œæ™®é€šçš„ lodash åŒºåˆ«åœ¨å“ªå‘¢ï¼Ÿåˆ†ä¸ºä»¥ä¸‹å‡ ç‚¹</p>
<ol>
<li>éƒ½æ˜¯çº¯å‡½æ•°</li>
<li>å‚æ•°çš„é¡ºåºè°ƒæ•´</li>
<li>iteratee å‚æ•°å—é™</li>
<li>å®Œå…¨æŸ¯é‡ŒåŒ–</li>
<li>æ²¡æœ‰å¯é€‰å‚æ•°ä¸‹é¢ä¸€ä¸€è§£é‡Šè¿™å‡ ç‚¹</li>
</ol>
<h3 id="pure"><a href="#pure" aria-label="pure permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pure</h3>
<p><em>éƒ½æ˜¯çº¯å‡½æ•°</em>è¿™å¥è¯, å¦‚æœä½ ç¨å¾®äº†è§£è¿‡å‡½æ•°å¼ç¼–ç¨‹, å°±çŸ¥é“å®ƒçš„æ„ä¹‰ä½•åœ¨.
æˆ‘ä»¬çœ‹è¿™ä¸ªä¾‹å­.
å¦‚æœæˆ‘ä»¬ä½¿ç”¨ lodash çš„ <code class="language-text">set</code>, æ‰§è¡Œ</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prevState<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">set</span><span class="token punctuation">(</span>prevState<span class="token punctuation">,</span> <span class="token string">'posts[0]'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></code></pre></div>
<p>è¿™æ ·çš„æ“ä½œä¼šä¿®æ”¹ prevState çš„, è‚¯å®šä¼šå¯¼è‡´çš„ bug çš„å‡ºç°. å½“ç„¶è¿™ç§ç”¨ set çš„æ–¹å¼ç¡®å®æœ‰ç‚¹æ€ª, æœ‰ç‚¹åƒå¼ºè¡Œæé€ çš„å‡ºæ¥çš„ä»£ç  ğŸŒ
ä½†æ˜¯å¦‚æœç”¨ lodash/fp ä¸‹çš„ <code class="language-text">set</code></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prevState<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">set</span><span class="token punctuation">(</span>'posts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> prevState<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>è¿™é‡Œæ²¡æœ‰ç”¨åˆ°æŸ¯é‡ŒåŒ–çš„å†™æ³•, ä»…ä»…æ˜¯ä¸ºäº†å˜ç° set çš„ Pure å’Œå‚æ•°é¡ºåºçš„è°ƒæ•´.
å¦å¤–, ä½ å¯ä»¥ç”¨ Jest è¿è¡Œä¸‹é¢ä»£ç , å¯ä»¥ç¡®å®šå®ƒæ˜¯çº¯çš„, è¿™æ ·ä¹Ÿå°±ä¿è¯äº† setState çš„æ­£ç¡®æ€§</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'The set function should be pure'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'posts[0]'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>posts<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>posts<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>posts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="rearranged-arguments"><a href="#rearranged-arguments" aria-label="rearranged arguments permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rearranged Arguments</h3>
<p>æœ€æ˜¾è‘—çš„ä¸€ç‚¹å°±æ˜¯, ç”± /data-first/ å˜æˆäº† /data-last/.
é™¤äº†ä¸Šé¢çš„ set, è¿˜æœ‰ <code class="language-text">map, reduce, filter</code> éƒ½æ˜¯è¿™æ ·.
<code class="language-text">map([1,2,3], a =&gt; a * 2)</code> è°ƒæ•´æˆäº† <code class="language-text">map(a =&gt; a * 2, [1,2,3])</code>
è¿™ä¸ªè°ƒæ•´ç›®å‰çœ‹ä¸Šå»æ²¡æœ‰ä»€ä¹ˆç”¨, ç­‰æè¿°å®ŒæŸ¯é‡ŒåŒ–åæˆ‘ä»¬ä¼šç»§ç»­å¯¹æ¯”</p>
<h3 id="capped-iteratee-arguments"><a href="#capped-iteratee-arguments" aria-label="capped iteratee arguments permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Capped Iteratee Arguments</h3>
<p>å°†è¿­ä»£å™¨å‡½æ•°åšé™åˆ¶, ä¸»è¦æ˜¯ä¸ºäº†è§„é¿ä¸€äº›å¸¸è§ bug</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// The `lodash/map` iteratee receives three arguments:</span>
<span class="token comment">// (value, index|key, collection)</span>
_<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> parseInt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// âœ [6, NaN, 2]</span>

<span class="token comment">// The `lodash/fp/map` iteratee is capped at one argument:</span>
<span class="token comment">// (value)</span>
fp<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// âœ [6, 8, 10]</span></code></pre></div>
<p>ä½†æ˜¯è¿™ä¼¼ä¹å‡ºç°äº†é—®é¢˜, æˆ‘ä»¬åœ¨ React ä¸­éœ€è¦<em>æ›´æ–°</em>æŸä¸ªæ•°ç»„å†…ç‰¹å®š index çš„ç”¨æ³•å°±ç”¨ä¸äº†.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> posts <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
	posts<span class="token punctuation">:</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>post<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span> i <span class="token operator">===</span> index <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token operator">...</span>post<span class="token punctuation">,</span> content<span class="token punctuation">:</span> <span class="token string">'good'</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> post<span class="token punctuation">,</span> posts<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>å½“ç„¶å‡½æ•°æœ¬æ¥æå‡äº†ä¸€ä¸ªæ–¹æ³• <code class="language-text">convert</code>, å¯ä»¥ç”¨æ¥å»é™¤è¿™ä¸ªé™åˆ¶.
<code class="language-text">const mapWithIndex = map.convert({ cap: false })</code>
ä¹‹åå†å°† <code class="language-text">map</code> æ›¿æ¢æˆ <code class="language-text">mapWithIndex</code> å°±è¡Œäº†.</p>
<p>å¯æ˜¯çœŸçš„æœ‰å¿…è¦è¿™æ ·åšå—? æˆ‘ä»¬æƒ³ä¸€ä¸‹, éš¾é“ cap ä»…ä»…åªæ˜¯ä¸ºäº†å‡å°‘è¿™ç§ bug å—? åœ¨æˆ‘çœ‹æ¥è¿˜æœ‰ä¸€ä¸ªåŸå› , æˆ‘ä»¬åº”è¯¥ä½¿ç”¨æ›´åŠ  <em>functional</em> çš„æ–¹å¼æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`posts[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]`</span></span><span class="token punctuation">,</span> <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'wow'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>è¿™æ ·çœ‹ä¸Šå»å°±ååˆ†æ¸…æ™°äº†. ä¸è¿‡, æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„. å¦‚æœæˆ‘ä»¬å°† <code class="language-text">set(&#39;content&#39;, &#39;wow&#39;)</code> æ›¿æ¢æˆ <code class="language-text">assign({ content: &#39;wow&#39; })</code> æˆ–è€… <code class="language-text">merge</code> è¡Œä¸è¡Œå‘¢?
æ©è¿™é‡Œæ˜¯ä¸è¡Œçš„, åŒæ ·çš„, åŸå› åœ¨åé¢å†è§£é‡Š.
ä¸è¿‡, lodash/fp å…¶å®è¿˜æä¾›äº†å¾ˆå¤šåŒåå‡½æ•°, <code class="language-text">set</code> çš„åŒåå‡½æ•°æœ‰ <code class="language-text">assoc</code> å’Œ <code class="language-text">assocPath</code>. ç”¨æ³•éƒ½ä¸€æ ·, ä¸è¿‡åœ¨å…¶ä»–åº“ä¸­, åé¢ä¸¤ä¸ªå‡½æ•°æ›´ä¸ºæ™®é.
<code class="language-text">assoc</code> çš„ç”¨æ³•å…¶å®å°±æ˜¯ä¸åµŒå¥—çš„ <code class="language-text">set</code>, å°±åƒä¸Šé¢ä¾‹å­é‚£æ ·.
<code class="language-text">assocPath</code> åˆ™æ˜¯éœ€è¦æ·±å…¥æŸä¸ªè·¯å¾„é‡Œ, åƒ <code class="language-text">set(&#39;a.b.c.d[0]&#39;)</code> è¿™ç§æƒ…å†µå°±åº”è¯¥ç”¨ <code class="language-text">assocPath</code>.
Lodash å·äº†æ‡’, æ²¡æœ‰åœ¨å®ç°ä¸ŠåŒºåˆ«å®ƒä»¬. ä¸è¿‡å®ƒæä¾›äº†ä¸€ä¸ª <code class="language-text">eslint-plugin-lodash-fp</code> æ¥æä¾› lint çš„æ”¯æŒ, å¸®åŠ©ä½¿ç”¨è€…åŠ ä»¥é™åˆ¶.</p>
<h3 id="currying"><a href="#currying" aria-label="currying permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Currying</h3>
<p>ç»ˆäºåˆ°äº†é‡ç‚¹å’¯. å…ˆæ¥è§£é‡Šä¸‹æŸ¯é‡ŒåŒ–å§.
è‹±æ–‡ /Currying/, ä¹‹æ‰€ä»¥è¿™ä¹ˆå«æ˜¯å› ä¸ºæœ‰ä¸€ä¸ªæ•°å­¦å®¶å«, <a href="https://en.wikipedia.org/wiki/Haskell_Curry">Haskell Curry</a> , ä»–æå‡ºäº†ä¸€ç§åŒ–ç®€é«˜é˜¶å‡½æ•°çš„æ–¹æ³•, æ‰€æœ‰åäººå°±ç»™è¿™ç§æ–¹æ³•å‘½åä¸º Currying å’¯. æˆ‘åˆå­¦çš„æ—¶å€™, ä¸€ç›´æ²¡ææ‡‚è¿™æ˜¯ä»€ä¹ˆæ„æ€, å› ä¸ºå®ƒçš„ç›´è¯‘å°±æ˜¯<em>å’–å–±</em>(é‚£ä¸ªæ—¶å€™, åº“é‡Œè¿˜æ²¡é‚£ä¹ˆç«)</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°, <code class="language-text">add</code>. é€šå¸¸çš„å†™æ³•åº”è¯¥æ˜¯ <code class="language-text">add(a, 10)</code>, è¯´æ˜æˆ‘ä»¬ç»™å˜é‡ a åŠ  10.
ä¸‹ä¸€æ¬¡æˆ‘ä»¬è¦ç»™å˜é‡ b åŠ  10, å°± <code class="language-text">add(b, 10)</code>, å¦‚æœè¿˜æœ‰å˜é‡ Câ€¦â€¦
å¦‚æœä¸€ä¸ªè¢«æŸ¯é‡ŒåŒ–è¿‡å¾— add, å°±å¯ä»¥è¿™æ ·å†™ <code class="language-text">add(a, 10) add(a)(10), add(__, 10)(a), add(__)(a)(10)</code>
ä½ å¯èƒ½ä¼šé—®è¿™æ ·æœ‰ä»€ä¹ˆç”¨ 0.0, è€Œä¸”é‚£ä¸ª <code class="language-text">__</code> æ˜¯ä»€ä¹ˆæ„æ€?
æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯, æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸€ä¸ªæ–°çš„å‡½æ•°</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> addTen <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>è¿™æ ·çš„è¯, è¦è®¡ç®— a, b, c åªéœ€è¦è°ƒç”¨ <code class="language-text">addTen(a)</code> è¿™æ ·å°±è¡Œå’¯.
é‚£ä¹ˆ <code class="language-text">__</code> å‘¢? å®˜æ–¹çš„è§£é‡Šæ˜¯:</p>
<blockquote>
<p>The placeholder argument, which defaults to <code class="language-text">__</code>, may be used to fill in method arguments in a different order. Placeholders are filled by the first available arguments of the curried returned function.</p>
</blockquote>
<p>ä»€ä¹ˆæ„æ€, æˆ‘ä»¬ä¸¾è¿‡ä¸€ä¸ªä¾‹å­. ä¸Šé¢çš„åŠ æ³•æ”¹æˆå‡æ³•, ä½†æ˜¯ç›®çš„è¿˜æ˜¯ä¸€æ ·, å°†ä¸€ä¸ªæ•°å‡ 10.
æƒ³ä¸€æƒ³, æˆ‘ä»¬è¿˜èƒ½ç”¨ <code class="language-text">sub(10)</code> å—? æ˜¾ç„¶ä¸è¡Œ, å› ä¸ºå‡æ³•ä¸æ˜¯åŠ æ³•, æ˜¯ä¸èƒ½äº¤æ¢çš„. å¦‚æœè¿™æ ·çš„è¯å°±ä¼šå˜æˆ 10 - a è€Œä¸æ˜¯ a - 10 å’¯.
è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨åˆ° <code class="language-text">__</code>, <code class="language-text">const subTen = sub(__, 10)</code>, è¿™æ ·çš„è¯å°±èƒ½æ»¡è¶³è¦æ±‚å’¯.
åŒæ—¶, ä½¿ç”¨å ä½ç¬¦, ä¸Šé¢çš„ä»£ç </p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`posts[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]`</span></span><span class="token punctuation">,</span> <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'wow'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>å…¶å®å¯ä»¥æ”¹æˆ</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`posts[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]`</span></span><span class="token punctuation">,</span> <span class="token function">assign</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token punctuation">{</span> content<span class="token punctuation">:</span> <span class="token string">'wow'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>æ‰€ä»¥ä¹‹å‰çš„ <code class="language-text">assign</code> ä¸è¡Œçš„åŸå› æ˜¯å› ä¸º, lodash/fp å¹¶æ²¡æœ‰è°ƒæ•´å®ƒçš„é¡ºåº. æœ¬æ¥æ˜¯åé¢çš„å‚æ•°è¦†ç›–å‰é¢çš„å‚æ•°, è¿™ç§å¾ˆç¬¦åˆäººç±»æ€è€ƒæ–¹å¼çš„ä¹ æƒ¯, ä½†æ˜¯å¦‚æœç¡¬è¦äº¤æ¢çš„è¯, åè€Œå°±ä¼šçœ‹ä¸Šå»å¾ˆå¥‡æ€ª.</p>
<p>ç°åœ¨æˆ‘ä»¬å¤§æ¦‚äº†è§£äº†æŸ¯é‡ŒåŒ–çš„ä½œç”¨, ä½†æ˜¯çœ‹ä¸Šå»æ•ˆæœè¿˜ä¸æ˜¯é‚£ä¹ˆæ˜æ˜¾. ä½†æ˜¯å¦‚æœç»“åˆå‚æ•°é¡ºåºçš„å¯¹è°ƒå‘¢?
å†çœ‹ä¸€ä¸ªä¾‹å­. è¿™ä¸ªä»£ç å¯èƒ½æœ‰ç‚¹æŠ½è±¡, æœ‰ç‚¹é•¿ :ï¼‰<a href="http://fr.umio.us/favoring-curry/">ä¾‹å­æ¥è‡ªä¸€ä¸ª ramda çš„æ•™ç¨‹</a></p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">getIncompleteTaskSummaries</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>membername<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token keyword">get</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'tasks'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>tasks <span class="token operator">=></span> <span class="token function">filter</span><span class="token punctuation">(</span>tasks<span class="token punctuation">,</span> <span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>tasks <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>tasks<span class="token punctuation">,</span> <span class="token string">'complete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>tasks <span class="token operator">=></span> <span class="token function">map</span><span class="token punctuation">(</span>tasks<span class="token punctuation">,</span> task <span class="token operator">=></span> <span class="token function">pick</span><span class="token punctuation">(</span>
				task<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'dueDate'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'priority'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>abbreviatedTasks <span class="token operator">=></span> <span class="token function">sortBy</span><span class="token punctuation">(</span>abbreviatedTask<span class="token punctuation">,</span> <span class="token string">'dueDate'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>æˆ‘ä»¬å…ˆä¸ç®¡å®ƒçš„åº”ç”¨åœºæ™¯, å…‰çœ‹ä»£ç çš„è¯, å¯ä»¥æ„è¯†åˆ°, è¿™é‡Œå†™äº†å¤ªå¤šé‡å¤çš„ tasks äº†, è€Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ—¥å¸¸ç¼–ç¨‹ä¸­çš„å¸¸è§å†™æ³•. tasks ä½œä¸ºä¸­é—´å˜é‡, éœ€è¦ä¸æ–­åœ°çš„ä¼ é€’.
æˆ‘ä»¬å‰¥ç¦»è¿™é‡Œçš„ Promise, æ”¹æˆè¿™ä¸ªæ ·å­</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">sortBy</span><span class="token punctuation">(</span>
  <span class="token function">map</span><span class="token punctuation">(</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">get</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'tasks'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'complete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> task <span class="token operator">=></span>
    <span class="token function">pick</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'dueDate'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'priority'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'dueDate'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>æˆ‘ç¨å¾®åšäº†ä¸€ç‚¹æ ¼å¼çš„è°ƒæ•´, ä½†æ˜¯è¿™äº›æ•´ä¸ªæ€è·¯å°±å¾ˆæ˜æ˜¾äº†, è¿™ä¸å°±æ˜¯å‡½æ•°åµŒå¥—å—? åªä¸è¿‡å¯è¯»æ€§ä¸æ˜¯é‚£ä¹ˆå¥½ :-(, æˆ‘ä»¬æ ¹æœ¬ä¸å¯èƒ½ä¸€çœ¼çœ‹å‡ºæ¥å®ƒæ˜¯å¯¹å“ªä¸ªå˜é‡è¿›è¡Œæ“ä½œ, æœ€å…ˆè¿è¡Œçš„å‡½æ•°åˆæ˜¯å“ªä¸ª</p>
<p>å¤§å­¦æ•°å­¦çš„ç¦»æ•£æ•°å­¦é‡Œåº”è¯¥æé«˜ä¸€ä¸ªæ¦‚å¿µ, <em>å‡½æ•°ç»„åˆ</em>. <em>f(g(x)) = f â€¢ g</em> æ‰€ä»¥ä¸Šé¢çš„å†™æ³•å¦‚æœå¯ä»¥æ”¹ä¸º <em>sortBy â€¢ map â€¢ reject â€¢ filter â€¢ get</em> è¿™ç§å½¢å¼çš„è¯, çœ‹ä¸Šå»åº”è¯¥ä¼šç®€å•å¾ˆå¤šå•¦, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åšåˆ°å—? å°è¯•ä¸‹ <code class="language-text">compose</code> å‡½æ•°.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">compose</span><span class="token punctuation">(</span>
  <span class="token function">sortBy</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token string">'dueDate'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">map</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token function">pick</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'dueDate'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'priority'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">reject</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token string">'complete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">filter</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>__<span class="token punctuation">,</span> <span class="token string">'tasks'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¸è¦è¿è¡Œè¿™æ®µå‡½æ•°</span></code></pre></div>
<p>å…¶å®è¿™æ ·çœ‹ä¸Šå»å·²ç»å¥½å¤šäº†ä¸æ˜¯å—? è‡³å°‘æˆ‘ä»¬ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥, æˆ‘ä»¬çš„é€»è¾‘é¡ºåºäº†.
è‡³äºä¸ºä»€ä¹ˆè¿™ä¹ˆå¤š <code class="language-text">__</code>, é‚£æ˜¯å› ä¸ºå®ƒä»¬éƒ½æ˜¯ data è¢«å¤„ç†åçš„ç»“æœ, ä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„ä¸­é—´å˜é‡. æ‰€ä»¥æˆ‘ä»¬ä»…ä»…åªéœ€è¦è°ƒæ•´å‡½æ•°å‚æ•°çš„é¡ºåº, å°±å¯ä»¥çœå»è¿™äº›å ä½ç¬¦.
å˜æˆ</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">compose</span><span class="token punctuation">(</span>
  <span class="token function">sortBy</span><span class="token punctuation">(</span><span class="token string">'dueDate'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">map</span><span class="token punctuation">(</span><span class="token function">pick</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'dueDate'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'priority'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'complete'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'tasks'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>è¿™å°±æ˜¯å‚æ•°éœ€è¦è°ƒæ•´é¡ºåºçš„åŸå› å•¦.</p>
<p>å†è§£é‡Šä¸€ä¸‹æŸ¯é‡ŒåŒ–åœ¨è¿™é‡Œçš„é‡è¦æ€§. å¦‚æœå‡½æ•°æ²¡æœ‰æŸ¯é‡ŒåŒ–çš„è¯, ä»ç¬¬ä¸€æ­¥ <code class="language-text">get(&#39;tasks&#39;)</code> å¼€å§‹, è¿™ä¸ªå‡½æ•°åªä¼šè¢«è§£é‡Šæˆ <code class="language-text">get(&#39;tasks&#39;, undefined)</code>, é‚£ä¹ˆå¾ˆæ˜¾ç„¶, åé¢çš„è¿‡ç¨‹å°±æ²¡æœ‰è¿›è¡Œä¸‹å»çš„æ„ä¹‰å’¯. è€Œé€šè¿‡æŸ¯é‡ŒåŒ–, è¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°, ä¸€ä¸ªéœ€è¦æ”¶é›†å®ƒå¦å¤–ä¸€ä¸ªå‚æ•°çš„å‡½æ•°.</p>
<p>åŒæ ·çš„ <code class="language-text">filter</code> ä¹Ÿéœ€è¦ä¸€ä¸ªæ•°ç»„æ¥å¡«å……è¿›æ¥, <code class="language-text">reject</code> å’Œåé¢çš„å‡½æ•°éƒ½ä¸€æ ·. å› ä¸ºå®ƒä»¬ç°åœ¨éƒ½æ˜¯å‡½æ•°, æ‰€ä»¥ compose ä¸ä¼šæŠ±æ€¨, å®ƒå°†è¿™äº›å‡½æ•°<em>ç»„åˆåœ¨äº†ä¸€èµ·</em>, å˜æˆäº†ä¸€ä¸ªæ–°çš„å‡½æ•°.
å½“æˆ‘ä»¬å°† data ä¼ å…¥è¿™ä¸ªæ–°å‡½æ•°çš„æ—¶å€™, å…ˆè¿è¡Œ <code class="language-text">get(&#39;tasks&#39;)(data)</code>, å¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„, è¿™ä¸ªæ•°ç»„ä¼ ç»™ <code class="language-text">filter(&#39;usename&#39;)</code> åˆå¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„. å°±è¿™æ ·åå¤çš„æ‰§è¡Œæœ€åå¾—åˆ°æˆ‘ä»¬çš„ç»“æœ</p>
<p>é¡ºä¾¿ä¸€æ, è¿™ç§ <code class="language-text">a(b(c(d(e, f)))))</code> çš„å½¢å¼å…¶å®å¾ˆåƒ <code class="language-text">reduce</code> çš„æ“ä½œ, æ‰€ä»¥å†çœ‹çœ‹ compose çš„å®ç°å§</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>fns<span class="token punctuation">)</span> <span class="token operator">=></span> fns<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h3 id="no-optional-arguments"><a href="#no-optional-arguments" aria-label="no optional arguments permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No Optional Arguments</h3>
<p>æœ€åå†è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦å›ºå®šå‚æ•°? Lodash çš„é‚£äº›å¯é€‰å‚æ•°çš„å‡½æ•°å…¨éƒ¨éƒ½æŒ‚äº†, ä¸ºä»€ä¹ˆå‘¢?
å…¶å®è¿™æ˜¯å› ä¸º <code class="language-text">curry</code> ä¸æ”¯æŒå¯é€‰å‚æ•°çš„. JS åŸç”Ÿä¸æ”¯æŒæŸ¯é‡ŒåŒ–, é‚£ä¹ˆæˆ‘ä»¬æ— éå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹.
ä¸€ä¸ªç®€å•çš„ curry æ–¹æ³•å¯ä»¥å†™æˆ</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> length <span class="token operator">=</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=></span>
  args<span class="token punctuation">.</span>length <span class="token operator">>=</span> length <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">:</span> curry<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> length<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>æ³¨æ„çœ‹å®ç°å°±å¯ä»¥å‘ç°, æˆ‘ä»¬å¿…é¡»äº†è§£åˆ°å‡½æ•°çš„é•¿åº¦, æ‰èƒ½å†³å®šæ˜¯è¿”å›å‡½æ•°çš„è¿è¡Œç»“æœè¿˜æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°.
çœ‹å®Œè¿™äº›å†å›è¿‡å¤´çœ‹ä¹‹å‰çš„ä¾‹å­çš„è¯, åº”è¯¥å°±å¾ˆå®¹æ˜“ç†è§£äº†.</p>
<h2 id="æ›´å¤šä¾‹å­"><a href="#%E6%9B%B4%E5%A4%9A%E4%BE%8B%E5%AD%90" aria-label="æ›´å¤šä¾‹å­ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ›´å¤šä¾‹å­</h2>
<p>ä¸Šé¢å·²ç»ä¸¾äº†ä½¿ç”¨ lodash/fp é…åˆ setState æ›´æ–°å’Œåˆ é™¤çš„ä¾‹å­, å†çœ‹çœ‹åœ¨æœ«å°¾æ·»åŠ çš„ä¾‹å­å§.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// æœ«å°¾æ·»åŠ </span>
<span class="token keyword">function</span> <span class="token function">addPost</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">,</span> <span class="token function">concat</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ›´æ–°æ•°ç»„ç‰¹å®šä¸‹æ ‡çš„å€¼, è¿™ä¸ªç±»ä¼¼äºäº•å­—æ£‹çš„æ¸¸æˆä¸­å¾ˆæœ‰ç”¨.</span>
<span class="token keyword">function</span> <span class="token function">setValue</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`posts[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]`</span></span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h2 id="ä¸è¶³"><a href="#%E4%B8%8D%E8%B6%B3" aria-label="ä¸è¶³ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸è¶³</h2>
<p>lodash/fp å…¶å®è¿˜æœ‰å¾ˆå¤šä¸è¶³, å®ƒä¸è¿‡æ˜¯å°† lodash é‡Œçš„å‡½æ•°æ”¹æˆäº† fp çš„å½¢å¼, æ‰€ä»¥å®ƒç›¸æ¯” lodash æ²¡æœ‰ä»»ä½•æ–°å‡½æ•°.
æ¯”å¦‚, å®ƒä¸èƒ½åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå€¼. åŒæ ·çš„ä¹Ÿä¸èƒ½ä½¿ç”¨å¤šä¸ªå‡½æ•°æ¥ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå€¼.
ç®€å•çš„è¯´å°±æ˜¯, <code class="language-text">set</code> å’Œ <code class="language-text">update</code> éƒ½ä»…ä»…åªæ”¯æŒä¿®æ”¹ä¸€ä¸ªå‚æ•°.
åŒæ—¶, é’ˆå¯¹æ•°ç»„çš„æ–¹æ³•ä¹Ÿä¸æ˜¯å¾ˆå¤š, æ¯”å¦‚æ²¡æœ‰ç±»ä¼¼äº <code class="language-text">insert</code> çš„æ–¹æ³•. è¿™å¯èƒ½æ˜¯å› ä¸ºåŸç”Ÿ js æœ‰äº† <code class="language-text">splice</code>, lodash ä¹Ÿæ²¡æœ‰åŠ å¼ºçš„å¿…è¦.</p>
<h2 id="ramda"><a href="#ramda" aria-label="ramda permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ramda</h2>
<p>æœ€å, å¦‚æœçœŸçš„å°è¯•ä½¿ç”¨è¿™ç§é£æ ¼çš„è¯, lodash/fp ä»…ä»…æ˜¯å…¥é—¨, å»ºè®®è¿˜æ˜¯ä½¿ç”¨ <a href="http://ramdajs.com">Ramda</a> æ¥è·å¾—æ›´åŠ çº¯ç²¹çš„ä½“éªŒå’Œäº«å—.
å…³äº Ramda çš„ä½¿ç”¨å¯ä»¥å‚è€ƒè¿™äº›<a href="http://fr.umio.us">åšå®¢</a></p></div><hr style="margin-bottom:1.75rem"/><div style="display:flex;align-items:center"><img src="/blogs/static/avatar-6c83ccb0db60a97539ade1fe12738717.jpg" alt="A cat named musa" style="margin-right:0.875rem;margin-bottom:0;border-radius:50%;width:3.5rem;height:3.5rem"/><h4 style="margin:0">Just Happy</h4></div><br/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blogs/object-assign/">â† <!-- -->Object.assign çš„ä¸€äº›é—®é¢˜</a></li><li><a rel="next" href="/blogs/PureComponent is harmful/PureComponent is harmful/">PureComponent Considered Harmful<!-- --> â†’</a></li></ul></article></main></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"lodash-fp-567","path":"/lodash-fp/"};window.dataPath="805/path---lodash-fp-567-3a4-IyuT0UdetxqAJGiqsYCo9b7yNE";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-011caea2a0bcf15f44d6.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-11b1f39ee30dae640c48.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-c59f786a55abdade9d2f.js"],"component---src-pages-index-js":["/component---src-pages-index-js-120cb87ee199e3322198.js"],"pages-manifest":["/pages-manifest-6f3e9ee13c63e3d8b926.js"]};/*]]>*/</script><script src="/blogs/webpack-runtime-82b54b860617f80c57ed.js" async=""></script><script src="/blogs/styles-018f1ae99b2bdaf5498d.js" async=""></script><script src="/blogs/app-011caea2a0bcf15f44d6.js" async=""></script><script src="/blogs/component---src-templates-blog-post-js-c59f786a55abdade9d2f.js" async=""></script><script src="/blogs/1-f619b1481c3ae3512ee3.js" async=""></script><script>
            const DARK = 'dark';
            const LIGHT = 'light';
            if (typeof localStorage !== 'undefined') {
              const theme = localStorage.getItem('theme');
              window.__preferTheme = theme;
              document.body.className = theme;
            }
          </script></body></html>