<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blogs/0.b6f197430f783b3e67aa.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style data-href="/blogs/component---src-templates-blog-post-js.e65711bd0a134b25c1fe.css">body{--blue:#007acc;--pink:#ffa7c4;--bg:#fff;--header:var(--blue);--textNormal:#222;--textTitle:#222;--textLink:var(--blue);--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a;background-color:var(--bg)}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:var(--pink);--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:#373c49;--inlineCode-text:#e6e6e6}em,h1,h2,h3,h4,h5,h6,li,p,small,strong{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}blockquote{margin:20px -30px 30px;padding:20px 45px 20px 26px}body:not(.dark) blockquote{background-color:rgba(255,229,100,.3);border-left:9px solid #ffe564}blockquote p:first-of-type:not(:last-child){font-weight:700;color:initial;margin-top:0}blockquote p:nth-of-type(2){margin-top:0;font-size:17px}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-],pre[class*=language-]{background:#011627}pre[class*=language-]{border-radius:10px;overflow:auto;padding:1em}pre[class*=language-]::selection{background:#27292a}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,93%,.15)}:not(pre)>code[class=language-text]{border-radius:.3em;background-color:var(--inlineCode-bg)!important;color:var(--inlineCode-text);white-space:normal;padding:0 3px;word-break:break-word;font-family:Menlo,Consolas,Courier New,monospace;text-shadow:none}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #ffa7c4}.gatsby-highlight{overflow:auto}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#637777}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .3s ease;display:flex}.react-toggle-track-check{flex:1 1;opacity:0;transition:opacity .25s ease;display:flex;align-items:center;justify-content:center}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{flex:1 1;display:flex;align-items:center;justify-content:center}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms}.react-toggle--checked .react-toggle-thumb{left:27px;border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><meta name="generator" content="Gatsby 2.0.85"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" href="/blogs/rss.xml"/><title data-react-helmet="true"></title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><link as="script" rel="preload" href="/blogs/component---src-templates-blog-post-js-0a3439677495c69d5841.js"/><link as="script" rel="preload" href="/blogs/0-e4bf796e84ab8db2b897.js"/><link as="script" rel="preload" href="/blogs/app-8af1ca11e4e4dfa1aa1d.js"/><link as="script" rel="preload" href="/blogs/webpack-runtime-7fed32a6ad22a919e918.js"/><link as="fetch" rel="preload" href="/blogs/static/d/358/path---browser-fcd-daf-adoJbZGCcj1D20FPadmaPtZqgho.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><main class="sc-bdVaJa jqFihH"><article style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header class="sc-htpNat efVuag"><h3 style="font-family:sans-serif;margin-top:0;margin-bottom:-1.75rem"><a class="sc-bwzfXH ktXRaB" href="/blogs/">ğŸ˜</a></h3><div class="react-toggle"><div class="react-toggle-track"><div class="react-toggle-track-check"><span>ğŸŒš</span></div><div class="react-toggle-track-x"><span>ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between Dark and Light mode"/></div></header><header><h1 style="color:var(--textTitle);transition:color 0.3s ease-out, background 0.3s ease-out">Inside look at modern web browserï¼ˆç¿»è¯‘ï¼‰</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">2018/10/05</p></header><div><p>åŸæ–‡ç³»åˆ—: <a href="https://developers.google.cn/web/updates/2018/09/inside-browser-part1">https://developers.google.cn/web/updates/2018/09/inside-browser-part1</a></p>
<p>ä¹‹å‰ï¼Œæˆ‘ä»¬æåˆ°äº† Chrome çš„å¤šè¿›ç¨‹æ„æ¶å’Œ URL å¯¼èˆªçš„å®ç°ã€‚åœ¨è¿™ç‰‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è¦ä¸€èµ·å»çœ‹çœ‹æ¸²æŸ“è¿›ç¨‹åˆ°åº•åšäº†ä»€ä¹ˆ</p>
<p>æ¸²æŸ“è¿‡ç¨‹ï¼ˆRender Progressï¼‰å’Œ Web çš„æ€§èƒ½æ¯æ¯ç›¸å…³ã€‚ä¹Ÿå› ä¸ºåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿå¾ˆå¤šäº‹æƒ…ï¼Œæœ¬æ–‡ä»…ä»…ä»‹ç»å®ƒçš„å†°å±±ä¸€è§’ã€‚å¦‚æœä½ æƒ³æ·±å…¥çš„äº†è§£ï¼Œ<a href="https://developers.google.cn/web/fundamentals/performance/why-performance-matters/">Why Performance Matters</a> æœ‰æ›´å¤šçš„èµ„æºã€‚</p>
<h2 id="æ¸²æŸ“è¿‡ç¨‹å¤„ç†-web-å†…å®¹"><a href="#%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B%E5%A4%84%E7%90%86-web-%E5%86%85%E5%AE%B9" aria-label="æ¸²æŸ“è¿‡ç¨‹å¤„ç† web å†…å®¹ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ¸²æŸ“è¿‡ç¨‹å¤„ç† Web å†…å®¹</h2>
<p>æ¸²æŸ“è¿‡ç¨‹è´Ÿè´£åœ¨ Tab ä¸­å‘ç”Ÿçš„ä¸€åˆ‡äº‹æƒ…ã€‚åœ¨ä¸€æ¬¡æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¸»çº¿ç¨‹ä¼šå¤„ç†ç»å¤§éƒ¨åˆ†ä½ ä¸ºç”¨æˆ·å‡†å¤‡çš„ä»£ç ã€‚å¦‚æœè¿˜åŒ…å«äº† Web Worker æˆ–è€… Service Workerï¼ˆPWAï¼‰ çš„ä»£ç ï¼Œè¿™éƒ¨åˆ†ä¼šç”± Worker çº¿ç¨‹æ¥å¤„ç†ã€‚<strong>Compositorï¼ˆåˆæˆï¼‰</strong> å’Œ <strong>Rasterï¼ˆæ …æ ¼ï¼‰</strong>ä¹Ÿå±äºæ¸²æŸ“è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä½¿é¡µé¢æ¸²æŸ“çš„æ›´ä¸ºé«˜æ•ˆå’Œå¹³æ»‘ã€‚</p>
<p>æ¸²æŸ“è¿›ç¨‹çš„æ ¸å¿ƒä»»åŠ¡æ˜¯å°† HTMLï¼ŒCSSï¼ŒJavaScript è½¬åŒ–æˆç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ Web ç½‘é¡µã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/renderer.png">
Figure 1: æ¸²æŸ“è¿›ç¨‹åŒ…æ‹¬äº†ä¸€ä¸ªä¸»çº¿ç¨‹ï¼ŒWorker çº¿ç¨‹ï¼Œä¸€ä¸ª Compositor çº¿ç¨‹ å’Œä¸€ä¸ª Raster çº¿ç¨‹ã€‚</p>
<h2 id="parsing"><a href="#parsing" aria-label="parsing permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parsing</h2>
<h3 id="dom-çš„åˆ›å»ºè¿‡ç¨‹"><a href="#dom-%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B" aria-label="dom çš„åˆ›å»ºè¿‡ç¨‹ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DOM çš„åˆ›å»ºè¿‡ç¨‹</h3>
<p>å½“æ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°æ¥è‡ª Navigationï¼ˆè¯¦æƒ…çœ‹ Part2ï¼‰çš„æäº¤ä¿¡æ¯å¹¶å¼€å§‹æ¥å— HTML æ•°æ®çš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹å¼€å§‹å°† HTML ä¸­çš„å­—ç¬¦ä¸²è½¬åŒ–æˆ <strong>D</strong>ocument <strong>O</strong>bject <strong>M</strong>odelï¼ˆ<strong>DOM</strong>ï¼‰</p>
<p>DOM å³æ˜¯æµè§ˆå™¨å†…éƒ¨å‘ˆç°ç½‘é¡µçš„æ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§å¼€å‘è€…å¯ä»¥é€šè¿‡ JavaScript ä¸ä¹‹äº¤äº’çš„æ•°æ®ç»“æ„å’Œ APIã€‚
<a href="https://html.spec.whatwg.org/">HTML Standard</a> å®šä¹‰äº†å°† HTML è½¬åŒ–æˆ DOM çš„è¿‡ç¨‹ã€‚ä½ åº”è¯¥æ³¨æ„åˆ°è¿‡ï¼Œæµè§ˆå™¨ä»æ¥ä¸ä¼šåœ¨è§£æ HTML çš„æ—¶å€™æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚æ¯”å¦‚ï¼Œå°‘äº† <code class="language-text">&lt;/p&gt;</code> çš„æ ‡ç­¾æ˜¯ä¸€ä¸ªåˆæ³•çš„ HTMLã€‚åƒ <code class="language-text">Hi! &lt;b&gt;I&#39;m &lt;i&gt;Chrome&lt;/b&gt;!&lt;/i&gt;</code> ï¼ˆb æ ‡ç­¾åœ¨ i ä¹‹å‰å°±é—­åˆäº†ï¼‰è¿™ç§é”™è¯¯çš„æ ‡è®°ï¼Œä¼šè¢«æµè§ˆå™¨çœ‹æˆ <code class="language-text">Hi!&lt;b&gt;I&#39;m &lt;i&gt;Chrome&lt;/i&gt;&lt;/b&gt;&lt;i&gt;!&lt;/i&gt;</code> æ¥ç†è§£ã€‚è¿™æ˜¯å› ä¸º HTML çš„æ ‡å‡†å°±æ˜¯ç‰¹æ„è®¾è®¡æˆèƒ½å¤Ÿå°†é”™è¯¯ä¼˜é›…çš„å¤„ç†æ‰ã€‚å¦‚æœä½ å¥½å¥‡è¿™å†…éƒ¨çš„ç»†èŠ‚ï¼Œå¯ä»¥é˜…è¯» HTML æ ‡å‡†ä¸­çš„ <a href="https://html.spec.whatwg.org/multipage/parsing.html#an-introduction-to-error-handling-and-strange-cases-in-the-parser">An introduction to error handling and strange cases in the parser</a> è¿™ä¸€èŠ‚ã€‚</p>
<h3 id="å­èµ„æºåŠ è½½"><a href="#%E5%AD%90%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD" aria-label="å­èµ„æºåŠ è½½ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å­èµ„æºåŠ è½½</h3>
<p>ä¸€ä¸ªç½‘é¡µé€šå¸¸è¿˜ä¼šæœ‰å›¾ç‰‡ï¼ŒCSS å’Œ JS ç­‰è¿™äº›å¤–éƒ¨èµ„æºã€‚è¿™äº›æ–‡ä»¶éœ€è¦ä»ç½‘ç»œæˆ–è€…ç¼“å­˜ä¸­è¢«åŠ è½½ã€‚ä¸»çº¿ä¼šåœ¨è§£æ HTML æ–‡ä»¶å¹¶æ„å»º DOM çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªä¸€ä¸ªçš„å¤„ç†å®ƒä»¬ã€‚ä½†æ˜¯ä¸ºäº†æé€Ÿï¼Œâ€œï¼ˆé¢„åŠ è½½æ‰«æå™¨ï¼‰preload scannerâ€ ä¼šå¹¶è¡Œè¿è¡Œã€‚å¦‚æœå­˜åœ¨ <code class="language-text">&lt;img&gt; å’Œ &lt;link&gt;</code> åœ¨ HTML ä¸­ï¼Œé¢„åŠ è½½æ‰«æå™¨ä¼šé»˜é»˜åœ°æŸ¥çœ‹è¿™äº›æ ‡è®°ï¼Œå¹¶åœ¨æµè§ˆè¿›ç¨‹ä¸­å‘ network çº¿ç¨‹å‘é€è¯·æ±‚ã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/dom.png">
Figure 2: ä¸»çº¿ç¨‹è§£æ HTML æ–‡æ¡£å¹¶æ„å»º DOM æ ‘</p>
<h3 id="javascript-ä¼šå µå¡è§£æ"><a href="#javascript-%E4%BC%9A%E5%A0%B5%E5%A1%9E%E8%A7%A3%E6%9E%90" aria-label="javascript ä¼šå µå¡è§£æ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript ä¼šå µå¡è§£æ</h3>
<p>å½“ HTML è§£æå™¨æ‰¾åˆ°ä¸€ä¸ª <code class="language-text">script</code> æ ‡ç­¾çš„æ—¶å€™ï¼Œå®ƒä¼šæš‚åœè§£æ HTML æ–‡æ¡£ï¼Œå¹¶å¼€å§‹ä¸‹è½½ï¼Œè§£æå¹¶æ‰§è¡Œ JS ä»£ç ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º JS å¯ä»¥ä½¿ç”¨åƒ <code class="language-text">document.write()</code> è¿™ç§æ”¹å˜äº†æ•´ä¸ª DOM ç»“æ„çš„æ–¹æ³•æ¥æ”¹å˜æ–‡æ¡£çš„å½¢çŠ¶ï¼ˆshape of the document)ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ HTML è§£æå™¨åœ¨å®ƒå¯ä»¥ç»§ç»­è§£æ HTML æ–‡æ¡£ä¹‹å‰ï¼Œå¿…é¡»ç­‰å¾… Javascript è¿è¡Œç»“æŸã€‚å¦‚æœä½ å¯¹ JS çš„æ‰§è¡Œç»†èŠ‚å¥½å¥‡çš„è¯ï¼Œ<a href="https://mathiasbynens.be/notes/shapes-ics">V8 å›¢é˜Ÿæœ‰ä¸€ç¯‡å…³äºå®ƒçš„åšå®¢ä»‹ç»</a></p>
<h2 id="æš—ç¤ºæµè§ˆå™¨å“ªäº›èµ„æºæ˜¯å¯ä»¥åŠ è½½çš„"><a href="#%E6%9A%97%E7%A4%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E5%93%AA%E4%BA%9B%E8%B5%84%E6%BA%90%E6%98%AF%E5%8F%AF%E4%BB%A5%E5%8A%A0%E8%BD%BD%E7%9A%84" aria-label="æš—ç¤ºæµè§ˆå™¨å“ªäº›èµ„æºæ˜¯å¯ä»¥åŠ è½½çš„ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æš—ç¤ºæµè§ˆå™¨å“ªäº›èµ„æºæ˜¯å¯ä»¥åŠ è½½çš„</h2>
<p>Web å¼€å‘è€…æœ‰å¾ˆå¤šç§æ–¹å¼å¯ä»¥æŒ‰æ—¶æµè§ˆå™¨å¦‚ä½•æ°å½“åœ°åŠ è½½èµ„æºã€‚å¦‚æœä½ çš„ JS ä¸ä½¿ç”¨ <code class="language-text">document.write()</code>ï¼Œä½ å¯ä»¥ç»™ <code class="language-text">script</code> æ ‡ç­¾æ·»åŠ  <code class="language-text">async</code> æˆ–è€… <code class="language-text">defer</code> attributeã€‚è¿™æ ·æµè§ˆå™¨å°±å¼‚æ­¥çš„åŠ è½½å’Œè¿è¡Œ JS ä»£ç ï¼Œè€Œä¸ä¼šå µå¡è§£æè¿‡ç¨‹ã€‚ä½ åŒæ—¶ä¹Ÿå¯ä»¥åœ¨æ°å½“çš„æ—¶å€™ä½¿ç”¨ <a href="https://developers.google.cn/web/fundamentals/primers/modules">JavaScript module</a>ã€‚<code class="language-text">&lt;link ref=&quot;preload&quot;&gt;</code> ä¹Ÿæ˜¯ä¸€ç§é€šçŸ¥æµè§ˆå™¨ï¼Œå½“å‰èµ„æºå¯ä»¥å°½å¿«ä¸‹è½½çš„æ–¹å¼ã€‚å¯ä»¥é€šè¿‡é˜…è¯» <a href="https://developers.google.cn/web/fundamentals/performance/resource-prioritization">Resource Prioritization â€“ Getting the Browser to Help You</a> äº†è§£æ›´å¤šã€‚</p>
<h2 id="style-calculation"><a href="#style-calculation" aria-label="style calculation permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Style calculation</h2>
<p>å› ä¸º CSS çš„å­˜åœ¨ï¼Œä»…ä»…æœ‰ä¸€ä¸ª DOM æ˜¯ä¸è¶³ä»¥è®©æµè§ˆå™¨äº†è§£æ•´ä¸ªç½‘é¡µä¼šæ˜¯æ€ä¹ˆæ ·çš„ã€‚ä¸»çº¿ç¨‹ä¼šè§£æ CSï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ª DOM èŠ‚ç‚¹è®¡ç®—å‡ºæœ€ç»ˆæ ·å¼ã€‚è¿™äº›ä¿¡æ¯ä¼šåŸºäº CSS é€‰æ‹©å™¨æ¥å‘ˆç°æ¯ä¸€ä¸ªå…ƒç´ è¢«åº”ç”¨äº†å“ªäº›æ ·å¼ã€‚ä½ å¯ä»¥åœ¨é€šè¿‡å¼€å‘è€…å·¥å…·çš„ <code class="language-text">computed</code> æ¥çœ‹åˆ°è¿™äº›ä¿¡æ¯ã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/computedstyle.png">
Figure 3: ä¸»çº¿ç¨‹è§£æ CSS å¾—åˆ°è®¡ç®—è¿‡çš„æ ·å¼</p>
<p>å³ä½¿ä½ ä¸æä¾›ä»»ä½• CSSï¼Œæ¯ä¸€ä¸ª DOM èŠ‚ç‚¹è¿˜æ˜¯ä¼šæœ‰ä¸€ä¸ªè¢«è®¡ç®—è¿‡çš„æ ·å¼ã€‚<code class="language-text">&lt;h1&gt;</code> æ ‡ç­¾çœ‹ä¸Šå»ä¼šæ¯” <code class="language-text">&lt;h2&gt;</code> æ›´å¤§ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªå…ƒç´ çš„ margin ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨ç»´æŠ¤äº†ä¸€ä¸ªé»˜è®¤æ ·å¼è¡¨ã€‚å¦‚æœä½ æƒ³äº†è§£ Chrome çš„é»˜è®¤æ ·å¼ï¼Œå¯ä»¥é˜…è¯»<a href="https://cs.chromium.org/chromium/src/third_party/blink/renderer/core/css/html.css">æºç </a></p>
<h2 id="layout"><a href="#layout" aria-label="layout permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layout</h2>
<p>ç°åœ¨æ¸²æŸ“è¿›ç¨‹çŸ¥é“äº† DOM çš„ç»“æ„å’Œæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æ ·å¼ï¼Œä½†æ˜¯è¿™äº›ä¿¡æ¯è¿˜ä¸è¶³ä»¥å»æ¸²æŸ“ä¸€ä¸ªé¡µé¢ã€‚ç›¸ä¿¡ä½ åœ¨ç”µè¯çš„å¦ä¸€å¤´åŠªåŠ›åœ°ç»™ä½ çš„æœ‹å‹æè¿°ä¸€å¹…ç”»ã€‚â€œæœ‰ä¸€ä¸ªå·¨å¤§çš„çº¢è‰²çš„åœ†å’Œä¸€ä¸ªå°ä¸€ç‚¹çš„è“è‰²çš„æ­£æ–¹å½¢â€æ˜¯ä¸è¶³ä»¥è®©ä½ çš„æœ‹å‹æƒ³è±¡å‡ºè¿™å¹…ç”»çš„æ ·å­çš„ã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/tellgame.png">
Figure 4: A person standing in front of a painting, phone line connected to the other person</p>
<p>Layout æ˜¯ä¸€ä¸ªæ‰¾åˆ°å…ƒç´ çš„å‡ ä½•ä¿¡æ¯çš„è¿‡ç¨‹ã€‚ä¸»çº¿ç¨‹é€šè¿‡éå† DOMï¼Œè®¡ç®—æ ·å¼ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåŒ…æ¢äº† x y åæ ‡ä¿¡æ¯å’Œè¾¹æ¡†å¤§å°çš„ layout æ ‘ã€‚Layout æ ‘å¯èƒ½å’Œ DOM æ ‘å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒä»…ä»…åŒ…å«äº†åœ¨èƒ½åœ¨é¡µé¢ä¸­è¢«çœ‹åˆ°çš„ä¿¡æ¯ã€‚æ¯”å¦‚ <code class="language-text">display: none</code> ä¸€æ—¦è¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œè¿™ä¸ªå…ƒç´ å°±ä¸æ˜¯ layout æ ‘çš„ä¸€éƒ¨åˆ†ã€‚ç›¸ä¼¼çš„ï¼Œå¦‚æœä¸€ä¸ªä¼ªå…ƒç´  <code class="language-text">p::before { content: &quot;Hi!&quot; }</code>è¢«åº”ç”¨é¥¿äº†ï¼Œå®ƒè™½ç„¶ä¸ä¼šå‡ºç°åœ¨ DOM æ ‘ä¸Šï¼Œä½†æ˜¯å±äº layout æ ‘ã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/layout.png">
Figure 5: ä¸»çº¿ç¨‹éå† DOM æ ‘ï¼Œé€šè¿‡å·²ç»è®¡ç®—çš„æ ·å¼ï¼Œå¾—åˆ° layout æ ‘</p>
<p>ç¡®å®šé¡µé¢çš„å¸ƒå±€æ˜¯ä¸€é¡¹ç”±æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚å³ä½¿æ˜¯æœ€ç®€å•çš„é¡µé¢å¸ƒå±€ï¼Œå¦‚ä»ä¸Šåˆ°ä¸‹çš„ block flowï¼Œä¹Ÿå¿…é¡»è€ƒè™‘å­—ä½“çš„å¤§å°ä»¥åŠåœ¨å“ªé‡Œåˆ’åˆ†å®ƒä»¬ï¼Œå› ä¸ºå®ƒä»¬ä¼šå½±å“æ®µè½çš„å¤§å°å’Œå½¢çŠ¶ï¼Œè¿˜ä¼šå½±å“ä¸‹ä¸€æ®µæ‰€éœ€çš„ä½ç½®ã€‚</p>
<p><a href='./layout.mp4'>layout.mp4</a></p>
<p>Figure 6: å› ä¸ºä¸€ä¸ªæ–­è¡Œçš„æ”¹å˜ï¼Œlayout ä¹Ÿè·Ÿç€æ”¹å˜</p>
<p>CSS è¿˜èƒ½è®©å…ƒç´ æµ®åŠ¨åˆ°ä¸€è¾¹ï¼Œéšè—è¶…å‡ºè¾¹ç•Œçš„éƒ¨åˆ†ï¼Œå¹¶ä¿®æ”¹å†™å…¥æ–¹å‘ã€‚ä½ å¯ä»¥æƒ³è±¡åˆ°ï¼Œlayout é˜¶æ®µå…¶å®æ˜¯éå¸¸å¤æ‚çš„ä»»åŠ¡ã€‚åœ¨ Chrome ä¸­ï¼Œæœ‰ä¸“é—¨ä¸€ä¸ªå›¢é˜Ÿçš„å·¥ç¨‹å¸ˆè‡´åŠ›äº layout çš„å·¥ä½œã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šæœ‰å…³ä»–ä»¬çš„å·¥ä½œç»†èŠ‚ï¼Œ<a href="https://www.youtube.com/watch?v=Y5Xa4H2wtVA">few talks form BlinkOn Conference</a> è®°å½•äº†å¤§é‡çš„æœ‰è¶£çš„å†…å®¹ã€‚</p>
<h2 id="paint"><a href="#paint" aria-label="paint permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Paint</h2>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/drawgame.png">
Figure 7: ä¸€ä¸ªäººæ‹¿ç€ç”»ç¬”ç«™åœ¨ç”»å¸ƒå‰ï¼Œæƒ³ç€åº”è¯¥å…ˆç”»åœ†è¿˜æ˜¯å…ˆç”»æ­£æ–¹å½¢</p>
<p>æœ‰äº† DOMï¼Œstyleï¼Œlayout è¿˜ä¸è¶³äºæ¸²æŸ“ä¸€ä¸ªé¡µé¢ã€‚å‡è®¾ä½ æ­£åœ¨åŠªåŠ›ç”»ä¸€å¹…ç”»ï¼Œä½ çŸ¥é“ç”»çš„å¤§å°ï¼Œå½¢çŠ¶ï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ‰€åœ¨çš„ä½ç½®ï¼Œä½†æ˜¯ä½ è¿˜æ˜¯éœ€è¦åˆ¤æ–­ç»˜åˆ¶å®ƒä»¬çš„é¡ºåºã€‚
æ¯”å¦‚ï¼Œ<code class="language-text">z-index</code> å¯èƒ½ä¼šè¢«è®¾ç½®åˆ°å½“å‰å…ƒç´ ä¸Šï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæŒ‰ HTML å®šä¹‰çš„é¡ºåºæ¥ç»˜åˆ¶å°±ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/zindex.png">
Figure 8: é¡µé¢çš„å…ƒç´ æŒ‰ HTML å…ƒç´ ä¸­å®šä¹‰çš„å…ƒç´ ï¼Œå¯¼è‡´äº†é”™è¯¯çš„ç»“æœã€‚å› ä¸º z-index æ²¡æœ‰è¢«è€ƒè™‘åœ¨å†…</p>
<p>åœ¨ç»˜åˆ¶ï¼ˆPaintï¼‰é˜¶æ®µï¼Œä¸»çº¿ç¨‹éå† layout æ ‘æ¥åˆ›å»ºç»˜åˆ¶è®°å½•ï¼ˆPaint record)ã€‚ç»˜åˆ¶è®°å½•æ˜¯ä¸€ä¸ªç»˜ç”»è¿‡ç¨‹çš„æ³¨è§£ï¼Œå¦‚â€œå…ˆèƒŒæ™¯ï¼Œæ¥ç€æ–‡æœ¬ï¼Œç„¶åçŸ©å½¢â€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ <code class="language-text">canvas</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å¯¹ä½ æ¥è¯´åº”è¯¥å¾ˆç†Ÿæ‚‰ã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/paint.png">
Figure 9: ä¸»çº¿ç¨‹éå† layout æ ‘å¹¶ç”Ÿæˆç»˜åˆ¶è®°å½•</p>
<h3 id="updating-rendering-pipeline-is-costly"><a href="#updating-rendering-pipeline-is-costly" aria-label="updating rendering pipeline is costly permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Updating rendering pipeline is costly</h3>
<p><a href='./trees.mp4'>trees.mp4</a></p>
<p>Figure 10: æœ‰åºçš„ç”Ÿæˆ DOM ï¼ŒStyleï¼ŒLayoutï¼ŒPaint Trees</p>
<p>æƒ³è¦ç†è§£æ¸²æŸ“ä¸€æ¡é¾™ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯<strong>æ¯ä¸€æ­¥ä¸­ï¼Œéƒ½ä¼šä½¿ç”¨ä¸Šä¸€ä¸ªæ“ä½œçš„ç»“æœä½œä¸ºæ–°çš„æ•°æ®ã€‚</strong> æ¯”å¦‚ä¿®æ”¹äº† layout æ ‘ï¼Œé‚£ä¹ˆ paint æ ‘ä¹Ÿéœ€è¦é‡æ–°ç”Ÿæˆã€‚
å¦‚æœä½ æ‰“ç®—ä¸ºæŸäº›å…ƒç´ åŠ åŠ¨ç”»ï¼Œæµè§ˆå™¨å¿…é¡»åœ¨æ¯ä¸€å¸§éƒ½é‡å¤è¿™äº›è¿‡ç¨‹ã€‚å¤§å¤šæ•°æ˜¾ç¤ºå™¨ 1 ç§’åˆ·æ–° 60 æ¬¡å±å¹•ï¼ˆ60 fpsï¼‰ã€‚å½“ç‰©ä½“åœ¨å±å¹•ä¸­ç§»åŠ¨çš„æ—¶å€™ï¼Œå‡ºç°åœ¨æ¯ä¸€å¸§ä¸­ï¼Œäººçœ¼å°±ä¼šè®¤ä¸ºè¿™æ®µåŠ¨ç”»ååˆ†å¹³æ»‘ã€‚ç„¶åï¼Œå¦‚æœåŠ¨ç”»åœ¨æŸæ®µæ—¶é—´å†…ä¸¢å¸§äº†ï¼Œé¡µé¢å°±ä¼šçœ‹ä¸Šå»â€œå¡é¡¿â€</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/pagejank1.png">
Figure 11ï¼šAnimation frames on a timeline</p>
<p>å³ä½¿ä½ çš„æ¸²æŸ“æ“ä½œèƒ½è·Ÿä¸Šå±å¹•çš„åˆ·æ–°ï¼Œä½†æ˜¯å› ä¸ºè¿™äº›è®¡ç®—æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œè¿™æ„å‘³ç€å½“æœ‰å…¶ä»–çš„ JS ä»£ç è¿è¡Œçš„æ—¶å€™ï¼ŒåŠ¨ç”»å°±ä¼šâ€œæ‰å¸§â€</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/pagejank2.png">
Figure 12: åœ¨åŠ¨ç”»å¸§çš„æ—¶é—´çº¿ä¸Šï¼Œæœ‰ä¸€å¸§è¢« JS å µå¡äº†</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code class="language-text">requestAnimationFrame</code> å°† JS æ“ä½œæ‹†åˆ†æˆä¸€å°ç‰‡ï¼Œå®ƒä»¬ä¼šåˆ†æ•£åœ¨æ¯ä¸€å¸§ä¸­è¿è¡Œã€‚å…³äºè¿™ä¸ªè¯é¢˜æ›´æ·±å…¥çš„éƒ¨åˆ†ï¼Œè¯·çœ‹ <a href="https://developers.google.cn/web/fundamentals/performance/rendering/optimize-javascript-execution">Optimize JavaScript Execution</a></p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/raf.png">
Figure 13ï¼šåœ¨åŠ¨ç”»å¸§çš„æ—¶é—´çº¿ä¸Šï¼Œæ›´å°çš„ JS å—</p>
<h2 id="compositing"><a href="#compositing" aria-label="compositing permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compositing</h2>
<h3 id="ä½ æ€æ ·-draw-ä¸€ä¸ªé¡µé¢"><a href="#%E4%BD%A0%E6%80%8E%E6%A0%B7-draw-%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2" aria-label="ä½ æ€æ · draw ä¸€ä¸ªé¡µé¢ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä½ æ€æ · draw ä¸€ä¸ªé¡µé¢</h3>
<p><a href='/blogs/naive_rastering-a0634ba076324953ca7af0a80e55eb81.mp4'>naive_rastering.mp4</a></p>
<p>Figure 14: naive çš„æ …æ ¼åŒ–è¿‡ç¨‹</p>
<p>ç°åœ¨æµè§ˆå™¨çŸ¥é“äº†æ–‡æ¡£ç»“æ„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ çš„æ ·å¼ï¼Œé¡µé¢çš„å‡ ä½•ä¿¡æ¯ï¼Œå’Œç»˜åˆ¶é¡ºåºï¼Œæ¥ä¸‹æ¥æ€æ · draw å‡ºè¿™ä¸ªé¡µé¢å‘¢ï¼Ÿå°†è¿™äº›ä¿¡æ¯è½¬åŒ–ä¸ºåƒç´ å¹¶å‘ˆç°åœ¨å±å¹•ä¸Šçš„è¿‡ç¨‹è¢«ç§°ä¸º<strong>æ …æ ¼åŒ–</strong>ã€‚
å¯èƒ½ä¸€ä¸ªæ¯”è¾ƒ naive çš„å¤„ç†è¿™ä¸ªæ–¹å¼æ˜¯ï¼šä»…ä»…æ …æ ¼åŒ–è§†å£çš„éƒ¨åˆ†ã€‚å¦‚æœç”¨æˆ·æ»šåŠ¨ç€é¡µé¢ï¼Œé‚£ä¹ˆåœ¨ç§»åŠ¨å¸§çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ç»§ç»­æ …æ ¼åŒ–æ¥å¡«å……ç¼ºå¤±çš„éƒ¨åˆ†ã€‚è¿™ä¹Ÿæ˜¯ Chrome åˆšå‘å¸ƒçš„æ—¶å€™ï¼Œé‡‡ç”¨çš„ç­–ç•¥ã€‚ç„¶åç°ä»£æµè§ˆå™¨ä¼šä½¿ç”¨ä¸€ç§è¢«ç§°ä¸ºåˆæˆï¼ˆcompositingï¼‰çš„æ›´ä¸ºç‰›é€¼ï¼ˆsophisticatedï¼‰çš„æ–¹å¼ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯åˆæˆ"><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%90%88%E6%88%90" aria-label="ä»€ä¹ˆæ˜¯åˆæˆ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä»€ä¹ˆæ˜¯åˆæˆ</h3>
<p><a href='/blogs/composit-42e8d29f2a2648a18da3571f345453e0.mp4'>composit.mp4</a>
Figure 15: åˆæˆè¿‡ç¨‹</p>
<p>åˆæˆæ˜¯ä¸€ç§ç”¨æ¥å°†ä¸€ä¸ªç•Œé¢åˆ†ä¸ºå¤šä¸ªå±‚ï¼Œåˆ†åˆ«å°†å®ƒä»¬æ …æ ¼åŒ–ï¼Œå¹¶åœ¨ä¸€ä¸ªå«åšåˆæˆå™¨çš„çº¿ç¨‹ä¸­å°†å®ƒä»¬é‡æ–°åˆå¹¶æˆä¸€ä¸ªç•Œé¢çš„æŠ€æœ¯ã€‚å¦‚æœæ»šåŠ¨å‘ç”Ÿäº†ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå›¾å±‚ï¼ˆLayerï¼‰éƒ½æ—©å·²æ …æ ¼åŒ–ï¼Œç°åœ¨è¯´éœ€è¦åšçš„äº‹æƒ…ä»…ä»…æ˜¯åˆæˆä¸€ä¸ªæ–°çš„å¸§ã€‚è€ŒåŠ¨ç”»ä¹Ÿå¯ä»¥é€šè¿‡ç§»åŠ¨å±‚å¹¶å°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ–°çš„å¸§çš„æ–¹å¼æ¥å®ç°ã€‚
ä½ å¯ä»¥ä½¿ç”¨å¼€å‘è€…å·¥å…·ä¸­çš„ Layers é¢æ¿æ¥æŸ¥çœ‹ä½ çš„ç½‘é¡µæ˜¯è¢«åˆ†æˆäº†å“ªäº›å±‚ã€‚</p>
<h3 id="æ·±å…¥-layer"><a href="#%E6%B7%B1%E5%85%A5-layer" aria-label="æ·±å…¥ layer permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ·±å…¥ Layer</h3>
<p>ä¸ºäº†åˆ†æ¸…æ¥šå“ªäº›å…ƒç´ ä¼šåœ¨å“ªäº›å›¾å±‚ä¸­å‡ºç°ï¼Œä¸»çº¿ç¨‹éœ€è¦éå† layout æ ‘å¹¶åˆ›å»ºä¸€ä¸ª layer æ ‘ï¼ˆåœ¨ Performance é¢æ¿ä¸­ï¼Œè¿™ä¸€éƒ¨åˆ†è¢«ç§°ä¸º Update Layer Treeï¼‰ã€‚å¦‚æœç•Œé¢ä¸­é‚£äº›æœ¬è¯¥æˆä¸ºå•ç‹¬çš„å±‚ï¼ˆæ¯”å¦‚æŠ½å±‰èœå•ï¼‰å´æ²¡æœ‰æˆä¸ºï¼Œä½ å¯ä»¥ä½¿ç”¨ CSS å±æ€§ <code class="language-text">will-change</code> æ¥æš—ç¤ºæµè§ˆå™¨ï¼Œå°†å®ƒæå‡ä¸ºä¸€ä¸ªå•ç‹¬çš„å±‚ã€‚</p>
<p>ä½ å¯èƒ½ä¼šç¦ä¸ä½è¯±æƒ‘è®©æ¯ä¸€ä¸ªå…ƒç´ éƒ½æˆä¸ºä¸€ä¸ªå›¾å±‚ï¼Œä½†æ˜¯åˆæˆå¤§é‡çš„å±‚åè€Œä¼šå¯¼è‡´è¿™ä¸ªè¿‡ç¨‹æ¯”ä¸€å¸§ä¸€å¸§çš„æ …æ ¼åŒ–è¿˜è¦æ…¢ï¼Œå…³é”®æ‰æ˜¯è¦æµ‹é‡ä½ çš„æ¸²æŸ“æ€§èƒ½ã€‚å…³äºè¿™ä¸ªéƒ¨åˆ†çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·çœ‹ <a href="https://developers.google.cn/web/fundamentals/performance/rendering/stick-to-compositor-only-properties-and-manage-layer-count">Stick to Compositor-Only Properties and Manager Layer Count</a></p>
<h3 id="raster-and-composite-off-of-the-main-thread"><a href="#raster-and-composite-off-of-the-main-thread" aria-label="raster and composite off of the main thread permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Raster and composite off of the main thread</h3>
<p>ä¸€æ—¦ Layer æ ‘å·²ç»åˆ›å»ºå¥½ï¼Œå¹¶ä¸” Paint çš„é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹å°±ä¼šå°†è¿™äº›ä¿¡æ¯æäº¤åˆ°åˆæˆå™¨çº¿ç¨‹ä¸­ã€‚åˆæˆå™¨çº¿ç¨‹ä¼šæ …æ ¼åŒ–æ¯ä¸€ä¸ª Layerã€‚æœ‰äº› Layer å¯ä»¥å’Œæ•´ä¸ªé¡µé¢ä¸€æ ·å¤§ï¼Œæ‰€ä»¥åˆæˆå™¨çº¿ç¨‹ä¼šå°†å®ƒä»¬åˆ†ä¸ºå¤šä¸ªå›¾å—ï¼Œæ¥ç€å°†æ¯ä¸€ä¸ªå›¾å—å‘é€ç»™æ …æ ¼çº¿ç¨‹ã€‚æ …æ ¼çº¿ç¨‹æ …æ ¼åŒ–æ¯ä¸€ä¸ªå›¾å—ï¼Œå¹¶å°†å®ƒä»¬å­˜åœ¨ GPU çš„å†…å­˜ä¸­ã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/raster.png">
Figure 17: æ …æ ¼çº¿ç¨‹åˆ›å»ºå¤šä¸ªä½å›¾å—ï¼Œå¹¶å‘é€ç»™ GPU</p>
<p>åˆæˆçº¿ç¨‹è¿˜å¯ä»¥æ ¹æ®ä¼˜å…ˆçº§å†³å®šï¼Œä»¥ä¾¿è§†å£ï¼ˆæˆ–é™„è¿‘ï¼‰å¯ä»¥å…ˆè¢«æ …æ ¼åŒ–ã€‚å›¾å±‚è¿˜å…·æœ‰å¤šä¸ª tiliings ç”¨äºå¤„ç†æ”¾å¤§æ“ä½œç­‰ã€‚</p>
<p>ä¸€æ—¦å›¾å—è¢«æ …æ ¼åŒ–ï¼Œåˆæˆå™¨çº¿ç¨‹ä¼šæœ‰ä¸€ä¸ªè¢«ç§°ä¸º<strong>draw quadsï¼ˆç»˜åˆ¶å››è¾¹å½¢ï¼‰</strong>çš„è¿‡ç¨‹æ¥æ”¶é›†è¿™äº›å›¾å—çš„ä¿¡æ¯ï¼Œä»¥åˆ›å»ºä¸€ä¸ª <strong>compositor frameï¼ˆåˆæˆå¸§ï¼‰</strong>
Compositor frame æ¥ç€ä¼šç”± IPC æäº¤åˆ°æµè§ˆå™¨è¿›ç¨‹ä¸­ã€‚æ­¤æ—¶ï¼Œå¯ä»¥ä» UI çº¿ç¨‹ä¸­æ·»åŠ å…¶ä»–çš„åˆæˆå¸§ç”¨äºæµè§ˆå™¨ UI çš„æ”¹å˜æˆ–è€…æ¸²æŸ“è¿›ç¨‹ã€‚æœ€åè¿™äº›åˆæˆå¸§ä¼šè¢«å‘é€åˆ° GPU ä»¥æ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚å¦‚æœæœ‰æ»šåŠ¨äº‹ä»¶å‘é€ï¼Œåˆæˆå™¨çº¿ç¨‹ä¼šåˆ›å»ºæ–°çš„åˆæˆå¸§å‘é€åˆ° GPUã€‚</p>
<p><img src="https://developers.google.cn/web/updates/images/inside-browser/part3/composit.png">
Figure 18: åˆæˆå™¨çº¿ç¨‹åˆ›é€ åˆæˆå¸§çš„è¿‡ç¨‹ã€‚å¸§å…ˆå‘é€åˆ°æµè§ˆå™¨çº¿ç¨‹ç„¶åå‘é€åˆ° GPU</p>
<p>åˆæˆçš„ä¼˜ç‚¹å°±æ˜¯å®ƒä¸ä¾èµ–ä¸»çº¿ç¨‹ã€‚åˆæˆçº¿ç¨‹ä¸éœ€è¦ç­‰å¾…æ ·å¼çš„è®¡ç®—æˆ–è€… JS çš„æ‰§è¡Œã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <a href="https://www.html5rocks.com/en/tutorials/speed/high-performance-animations/">åªæ”¹å˜é‚£äº›ä¼šå¯¼è‡´åˆæˆçš„å±æ€§</a>è¢«è®¤ä¸ºæ˜¯åˆ›å»ºå¹³æ»‘åŠ¨ç”»çš„æœ€ä½³é€‰æ‹©ã€‚å¦‚æœ layout æˆ–è€… paint éœ€è¦è¢«å†æ¬¡è®¡ç®—ï¼Œåˆ™ä¸»çº¿ç¨‹åˆä¼šå¿™ç¢Œèµ·æ¥ã€‚</p>
<h2 id="æ€»ç»“"><a href="#%E6%80%BB%E7%BB%93" aria-label="æ€»ç»“ permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ€»ç»“</h2>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢ç´¢äº†æ¸²æŸ“ä¸€æ¡é¾™ï¼šä»è§£æåˆ°åˆæˆã€‚ä½†æ„¿ä½ ç°åœ¨æœ‰èƒ½åŠ›å»è¶Šå¤šæ›´å¤šæœ‰å…³ç½‘é¡µæ€§èƒ½ä¼˜åŒ–çš„æ–‡ç« ã€‚
åœ¨ä¸‹ä¸€ç¯‡ï¼Œä¹Ÿæ˜¯æœ¬ç³»åˆ—çš„æœ€åä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šæ·±å…¥åˆæˆçº¿ç¨‹ï¼Œä¸€èµ·çœ‹çœ‹å½“ç”¨æˆ·è¾“å…¥äº‹ä»¶<code class="language-text">mousemove click</code>çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p></div><hr style="margin-bottom:1.75rem"/><div style="display:flex;align-items:center"><img src="/blogs/static/avatar-6c83ccb0db60a97539ade1fe12738717.jpg" alt="A cat named musa" style="margin-right:0.875rem;margin-bottom:0;border-radius:50%;width:3.5rem;height:3.5rem"/><h4 style="margin:0">Just Happy</h4></div><br/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blogs/git/">â† <!-- -->The Junior Git</a></li><li><a rel="next" href="/blogs/react-lazy/">React Lazy çš„å®ç°åŸç†<!-- --> â†’</a></li></ul></article></main></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"browser-fcd","path":"/browser/"};window.dataPath="358/path---browser-fcd-daf-adoJbZGCcj1D20FPadmaPtZqgho";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8af1ca11e4e4dfa1aa1d.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-5af30d9bbd11b00a7754.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.e65711bd0a134b25c1fe.css","/component---src-templates-blog-post-js-0a3439677495c69d5841.js"],"component---src-pages-index-js":["/component---src-pages-index-js.5866ebda04275b066d22.css","/component---src-pages-index-js-707da05f72f08bd8fa35.js"],"pages-manifest":["/pages-manifest-c0059cde869edc5a4284.js"]};/*]]>*/</script><script src="/blogs/webpack-runtime-7fed32a6ad22a919e918.js" async=""></script><script src="/blogs/app-8af1ca11e4e4dfa1aa1d.js" async=""></script><script src="/blogs/0-e4bf796e84ab8db2b897.js" async=""></script><script src="/blogs/component---src-templates-blog-post-js-0a3439677495c69d5841.js" async=""></script></body></html>